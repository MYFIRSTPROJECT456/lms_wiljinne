<!DOCTYPE html>
<html lang="en">
<%- include lib/apicalh01 %>
<% var pagename="Channel partner" %>
<!-- ================== BEGIN PAGE LEVEL STYLE ================== -->
<link href="assets/plugins/bootstrap-datepicker/css/bootstrap-datepicker.css" rel="stylesheet" />
<link href="assets/plugins/bootstrap-datepicker/css/bootstrap-datepicker3.css" rel="stylesheet" />
<link href="assets/plugins/bootstrap-timepicker/css/bootstrap-timepicker.min.css" rel="stylesheet" />
<link href="assets/plugins/bootstrap-daterangepicker/daterangepicker.css" rel="stylesheet" />
<link href="assets/plugins/bootstrap-eonasdan-datetimepicker/build/css/bootstrap-datetimepicker.min.css" rel="stylesheet" />
<link href="assets/plugins/bootstrap-wizard/css/bwizard.min.css" rel="stylesheet" />
<link href="assets/plugins/DataTables/extensions/Scroller/css/scroller.bootstrap.min.css" rel="stylesheet" />
<link href="assets/plugins/DataTables/media/css/dataTables.bootstrap.min.css" rel="stylesheet" />
<link href="assets/plugins/DataTables/extensions/Buttons/css/buttons.bootstrap.min.css" rel="stylesheet" />
<link href="assets/plugins/DataTables/extensions/Responsive/css/responsive.bootstrap.min.css" rel="stylesheet" />
<!-- ================== END PAGE LEVEL STYLE ================== -->

<!-- ================== BEGIN BASE JS ================== -->
<script src="assets/plugins/pace/pace.min.js"></script>
<!-- ================== END BASE JS ================== -->
<!-- styles -->

<link href="assets/css/demo.css" rel="stylesheet">

<!-- Add IntroJs styles -->
<link href="assets/css/introjs.css" rel="stylesheet">

<!--   <link href="assets/css/bootstrap-responsive.min.css" rel="stylesheet"> -->
<script>
	function startTour() {
		var tour = introJs()
		tour.setOption('tooltipPosition', 'auto');
		tour.setOption('positionPrecedence', ['left', 'right', 'bottom', 'top'])
		tour.start()
	}
</script>
<script type="text/javascript">
	var Screenfields=[];
	var currentcount=0;
	var selectedIds=[];
	var groupcount=1;
</script>
<style type="text/css">
	input,textarea,select,.multipleSelect,.selectpicker,.datepicker{
		margin:0 0 10px 0;
	}
	.element {
		position: relative;
		top: 50%;
		transform: translateY(-10%);
	}
</style>
<body>
	<!-- begin #page-loader -->
	<div id="page-loader" class="fade in"><span class="spinner"></span></div>
	<!-- end #page-loader -->
	
	<!-- begin #page-container -->
	<div id="page-container" class="fade page-sidebar-fixed page-header-fixed">
		<%- include lib/apicalh02 %>
		
		<!-- begin #sidebar -->
		<div id="sidebar" class="sidebar">
			<!-- begin sidebar scrollbar -->
			<div data-scrollbar="true" data-height="100%">
				<!-- begin sidebar user -->
				<ul class="nav">
					<li class="nav-profile">
						<div class="image">
							<a href="javascript:;"><img src="assets/img/user.png" alt="" /></a>
						</div>
						<div class="info">
							<%=user.enname  %>
						</div>
					</li>
				</ul>
				<!-- end sidebar user -->
				<%- include lib/apicalm01 %>
			</div>
			<!-- end sidebar scrollbar -->
		</div>
		<!-- end #sidebar -->
		
		<!-- begin #content -->
		<div id="content" class="content">
			<!-- begin breadcrumb -->
			
			<!-- end breadcrumb -->
			<!-- begin row -->
			<div class="row">
				<!-- begin col-12 -->
				<div class="col-md-12">
					<!-- begin panel -->
					<div class="panel panel-inverse">
						<div class="panel-heading">
							<div class="panel-heading-btn element">
								<% if(user.syno != '1'){%><a href="javascript:onValidate();" class="btn btn-xl btn-icon btn-circle btn-success"><i class="fa fa-save" ></i></a> <%}%>
								<a href="javascript:print();" class="btn btn-xl btn-icon btn-circle btn-success" id="print"><i class="fa fa-print" ></i></a>
								<a href="javascript:reset();" class="btn btn-xl btn-icon btn-circle btn-success"><i class="fa fa-refresh" ></i></a>
								<a href="javascript:approve();" class="btn btn-xl btn-icon btn-circle btn-success"><i class="fa fa-remove" ></i></a>
							</div>
							<h4 class="panel-title">Coupon Management</h4>
						</div>
						<div class="panel-body">
							<form action="/" method="POST" name="form-wizard" id="form1" data-parsley-validate="true">
								<div id="wizard">
									<ol>
										<li data-step="4" data-intro="This is Coupan list tab on click this Coupon page will open!">
											Coupon List
											
										</li>
										<li data-step="5" data-intro="This is Coupan info tab on click this Coupon info page will open!">
											Coupon Info
											
										</li>
										
									</ol>
									<!-- begin wizard step-1 -->
									<div>
										<!-- begin row -->
										<div class="row">
											<!-- begin col-4 -->
											<div class="panel-body">
												<table id="data-table1" class="table table-striped table-bordered">
													<thead>
														<tr>
															<th>Coupan Name</th>
															<th>Start Date</th>
															<th>End Date</th>
															<th>Partner Name</th>
															
														</tr>
													</thead>
													<tbody>
														
													</tbody>
												</table>
											</div>
											<!-- end col-4 -->
										</div>
										<!-- end row -->
									</div>
									<!-- end wizard step-1 -->
									<!-- begin wizard step-2 -->
									<div>
										<!-- begin row -->
										<div class="row form-group" style="margin-bottom: 10px">
											<label class="control-label col-md-2">Coupon Name</label>
											<div class="col-md-4">
												<input type="text" name="couponname" placeholder="Enter Name Here" class="form-control"  required  />
											</div>
										</div>
										<!-- end col-6 -->
										<!-- begin col-6 -->
										
										<div class="row">
											<div class="col-md-2">
												<div class="form-group">
													<label>Start Date</label>
												</div>
											</div>
											<!-- begin col-6 -->
											<div class="col-md-4">
												<div class="form-group">
													<p><input type="text" class="form-control datepicker" name="state_date"></p>
												</div>
											</div>
										</div>
										<div class="row">
											<div class="col-md-2">
												<div class="form-group">
													<label>End Date</label>
												</div>
											</div>
											<!-- begin col-6 -->
											<div class="col-md-4">
												<div class="form-group">
													<p><input type="text" class="form-control datepicker" name="end_date"></p>
												</div>
											</div>
										</div>

										
										<!-- end col-6 -->
										<!-- end row -->
									</div>
									<!-- end wizard step-2 -->

								</div>
							</form>
						</div>
					</div>
					<!-- end panel -->
				</div>
				<!-- end col-12 -->
			</div>
			<!-- end row -->
		</div>
		<!-- end #content -->
	<!-- <p class="text-center">
                            &copy; Apical Innovations All Right Reserved 2017
                        </p> -->
                        <!-- begin scroll to top btn -->
                        <a href="javascript:;" class="btn btn-icon btn-circle btn-success btn-scroll-to-top fade" data-click="scroll-top"><i class="fa fa-angle-up"></i></a>
                        <!-- end scroll to top btn -->
                    </div>
                    <!-- end page container -->
                    
                    
                    <!-- ================== BEGIN BASE JS ================== -->
                    <%- include lib/apicalf02.ejs %>	
                    <!-- ================== END BASE JS ================== -->
                    
                    <script src="assets/plugins/DataTables/media/js/jquery.dataTables.js"></script>
                    <script src="assets/plugins/DataTables/media/js/dataTables.bootstrap.min.js"></script>
                    <script src="assets/plugins/DataTables/extensions/Buttons/js/dataTables.buttons.min.js"></script>
                    <script src="assets/plugins/DataTables/extensions/Buttons/js/buttons.bootstrap.min.js"></script>
                    <script src="assets/plugins/DataTables/extensions/Buttons/js/buttons.flash.min.js"></script>
                    <script src="assets/plugins/DataTables/extensions/Buttons/js/jszip.min.js"></script>
                    <script src="assets/plugins/DataTables/extensions/Buttons/js/pdfmake.min.js"></script>
                    <script src="assets/plugins/DataTables/extensions/Buttons/js/vfs_fonts.min.js"></script>
                    <script src="assets/plugins/DataTables/extensions/Buttons/js/buttons.html5.min.js"></script>
                    <script src="assets/plugins/DataTables/extensions/Buttons/js/buttons.print.min.js"></script>
                    <script src="assets/plugins/DataTables/extensions/Scroller/js/dataTables.scroller.min.js"></script>
                    <script src="assets/plugins/DataTables/extensions/Responsive/js/dataTables.responsive.min.js"></script>
                    <!-- <script src="assets/js/form-wizards-validation.demo.min.js"></script> -->
                    <script src="assets/js/apical/table-manage-scroller.demo.js"></script>
                    <!-- ================== END BASE JS ================== -->
                    
                    <!-- ================== BEGIN PAGE LEVEL JS ================== -->
                    <script src="assets/plugins/parsley/dist/parsley.js"></script>
                    <script src="assets/plugins/bootstrap-wizard/js/bwizard.js"></script>
                    <script src="assets/js/form-wizards.demo.min.js"></script>
                    <script src="assets/js/apps.min.js"></script>
                    <!-- ================== END PAGE LEVEL JS ================== -->
                    <script type="text/javascript" src="assets/js/intro.js"></script>
                    
                    <script>
                    	$(document).ready(function() {
                    		App.init();
                    		FormWizard.init();
                                $(".datepicker").datepicker({ dateFormat: 'dd/mm/yy' });
                    	});
                    	
                    	$(window).load(function(e) {
                    		TableManageScroller1.init(<%= scrndtl.col2 %>);
                    	});
                    </script>
                    <script>

                    	function reset() {
                    		document.getElementById("form1").reset();
                    		$('#data-table1').DataTable().ajax.reload();
                    	};
                    	
                    	function onValidate(){    
                    		var form = $('#form1');
                    		form.parsley().validate();
                    		if (form.parsley().isValid()){
			//	alert('valid');
			var formdata=$('#form1').serializeArray();
//add checkbox value to postdata
/*var vals='';
$("input[name='mincheck[]']").map(function() {
	if (this.checked){
		vals += '1';
	}else{
		vals += '0';
	}
});
formdata.push({ name: "validation", value: vals });*/
// radio button bit to post data
/*var visiblebit = $('input:radio[name=visiblebit]:checked').val();
formdata.push({ name: "visible", value: visiblebit });*/

                            //structure json
                            var data = formdata.reduce(function(a, x) {
                            	a[x.name] = x.value;
                            	return a;
                            }, {});
                            Screenfields.push(data);
                            $.ajax({
                            	type: "POST",
                            	url: "/savedata",
                            	timeout: 2000,
                            	contentType: 'application/json',
                            	data: JSON.stringify({
                            		scrid: <%= scrndtl.col2 %>,
                            		formdata: JSON.stringify(Screenfields)
                            	}),
                            	success: function(data) {
                            		var fdata = JSON.parse(JSON.stringify(data));
                            		if (fdata.status == '1') {
                            			Screenfields = [];
                            			alert("Data saved successfully");
                            			$('#form1').trigger("reset");
                            		} else {
                            			/*$('#form1').trigger("reset");*/
                            			alert(fdata.err_msg);
                            			Screenfields = [];
                            		}
                            	}
                            });
                        } else {
                        	alert('Form not valid');
                        }
                    };
                </script>
            </body>

            </html>
